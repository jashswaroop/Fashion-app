{% extends "base.html" %}

{% block title %}Profile - Fashion Recommendation App{% endblock %}

{% block content %}
<div class="bg-gray-50 min-h-screen py-8">
    <div class="container mx-auto px-6">
        <!-- Header Section -->
        <div class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-800 mb-3">
                <i class="fas fa-user-circle text-pink-500"></i> My Profile
            </h1>
            <p class="text-gray-600">Customize your fashion preferences and personal information</p>
        </div>

        <div class="max-w-4xl mx-auto">
            <div class="grid md:grid-cols-3 gap-8">
                <!-- Profile Form -->
                <div class="md:col-span-2">
                    <div class="card-3d bg-white p-8 rounded-lg shadow-lg">
                        <div class="flex items-center mb-6">
                            <i class="fas fa-edit text-pink-500 text-xl mr-3"></i>
                            <h2 class="text-2xl font-bold text-gray-800">Profile Information</h2>
                        </div>

                        <form method="POST" class="space-y-6">
                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <label for="age" class="block text-sm font-medium text-gray-700 mb-2">Age</label>
                                    <input type="number" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-200"
                                           id="age" name="age" value="{{ user.age or '' }}" min="13" max="100" placeholder="Enter your age">
                                </div>

                                <div>
                                    <label for="gender" class="block text-sm font-medium text-gray-700 mb-2">Gender</label>
                                    <select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-200" id="gender" name="gender">
                                        <option value="">Select Gender</option>
                                        <option value="Female" {{ 'selected' if user.gender == 'Female' }}>Female</option>
                                        <option value="Male" {{ 'selected' if user.gender == 'Male' }}>Male</option>
                                        <option value="Non-binary" {{ 'selected' if user.gender == 'Non-binary' }}>Non-binary</option>
                                        <option value="Prefer not to say" {{ 'selected' if user.gender == 'Prefer not to say' }}>Prefer not to say</option>
                                    </select>
                                </div>
                            </div>

                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <label for="body_type" class="block text-sm font-medium text-gray-700 mb-2">Body Type</label>
                                    <select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-200" id="body_type" name="body_type">
                                        <option value="">Select Body Type</option>
                                        <option value="Pear" {{ 'selected' if user.body_type == 'Pear' }}>Pear</option>
                                        <option value="Apple" {{ 'selected' if user.body_type == 'Apple' }}>Apple</option>
                                        <option value="Hourglass" {{ 'selected' if user.body_type == 'Hourglass' }}>Hourglass</option>
                                        <option value="Rectangle" {{ 'selected' if user.body_type == 'Rectangle' }}>Rectangle</option>
                                        <option value="Inverted Triangle" {{ 'selected' if user.body_type == 'Inverted Triangle' }}>Inverted Triangle</option>
                                    </select>
                                </div>

                                <div>
                                    <label for="style_preference" class="block text-sm font-medium text-gray-700 mb-2">Style Preference</label>
                                    <select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-200" id="style_preference" name="style_preference">
                                        <option value="">Select Style</option>
                                        <option value="Casual" {{ 'selected' if user.style_preference == 'Casual' }}>Casual</option>
                                        <option value="Business" {{ 'selected' if user.style_preference == 'Business' }}>Business</option>
                                        <option value="Formal" {{ 'selected' if user.style_preference == 'Formal' }}>Formal</option>
                                        <option value="Bohemian" {{ 'selected' if user.style_preference == 'Bohemian' }}>Bohemian</option>
                                        <option value="Minimalist" {{ 'selected' if user.style_preference == 'Minimalist' }}>Minimalist</option>
                                        <option value="Trendy" {{ 'selected' if user.style_preference == 'Trendy' }}>Trendy</option>
                                        <option value="Classic" {{ 'selected' if user.style_preference == 'Classic' }}>Classic</option>
                                        <option value="Edgy" {{ 'selected' if user.style_preference == 'Edgy' }}>Edgy</option>
                                    </select>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-3">Color Preferences</label>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                    <label class="flex items-center space-x-2 cursor-pointer">
                                        <input type="checkbox" value="Black" id="color_black" class="w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500">
                                        <span class="text-sm text-gray-700">Black</span>
                                    </label>
                                    <label class="flex items-center space-x-2 cursor-pointer">
                                        <input type="checkbox" value="White" id="color_white" class="w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500">
                                        <span class="text-sm text-gray-700">White</span>
                                    </label>
                                    <label class="flex items-center space-x-2 cursor-pointer">
                                        <input type="checkbox" value="Red" id="color_red" class="w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500">
                                        <span class="text-sm text-gray-700">Red</span>
                                    </label>
                                    <label class="flex items-center space-x-2 cursor-pointer">
                                        <input type="checkbox" value="Blue" id="color_blue" class="w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500">
                                        <span class="text-sm text-gray-700">Blue</span>
                                    </label>
                                    <label class="flex items-center space-x-2 cursor-pointer">
                                        <input type="checkbox" value="Green" id="color_green" class="w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500">
                                        <span class="text-sm text-gray-700">Green</span>
                                    </label>
                                    <label class="flex items-center space-x-2 cursor-pointer">
                                        <input type="checkbox" value="Pink" id="color_pink" class="w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500">
                                        <span class="text-sm text-gray-700">Pink</span>
                                    </label>
                                    <label class="flex items-center space-x-2 cursor-pointer">
                                        <input type="checkbox" value="Purple" id="color_purple" class="w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500">
                                        <span class="text-sm text-gray-700">Purple</span>
                                    </label>
                                    <label class="flex items-center space-x-2 cursor-pointer">
                                        <input type="checkbox" value="Neutral" id="color_neutral" class="w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500">
                                        <span class="text-sm text-gray-700">Neutral Tones</span>
                                    </label>
                                </div>
                                <input type="hidden" id="color_preference" name="color_preference" value="{{ user.color_preference or '' }}">
                            </div>

                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <label for="size_preference" class="block text-sm font-medium text-gray-700 mb-2">Size</label>
                                    <select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-200" id="size_preference" name="size_preference">
                                        <option value="">Select Size</option>
                                        <option value="XS" {{ 'selected' if user.size_preference == 'XS' }}>XS</option>
                                        <option value="S" {{ 'selected' if user.size_preference == 'S' }}>S</option>
                                        <option value="M" {{ 'selected' if user.size_preference == 'M' }}>M</option>
                                        <option value="L" {{ 'selected' if user.size_preference == 'L' }}>L</option>
                                        <option value="XL" {{ 'selected' if user.size_preference == 'XL' }}>XL</option>
                                        <option value="XXL" {{ 'selected' if user.size_preference == 'XXL' }}>XXL</option>
                                    </select>
                                </div>

                                <div>
                                    <label for="budget_range" class="block text-sm font-medium text-gray-700 mb-2">Budget Range</label>
                                    <select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-200" id="budget_range" name="budget_range">
                                        <option value="">Select Budget</option>
                                        <option value="Under $50" {{ 'selected' if user.budget_range == 'Under $50' }}>Under $50</option>
                                        <option value="$50 - $100" {{ 'selected' if user.budget_range == '$50 - $100' }}>$50 - $100</option>
                                        <option value="$100 - $200" {{ 'selected' if user.budget_range == '$100 - $200' }}>$100 - $200</option>
                                        <option value="$200 - $500" {{ 'selected' if user.budget_range == '$200 - $500' }}>$200 - $500</option>
                                        <option value="Over $500" {{ 'selected' if user.budget_range == 'Over $500' }}>Over $500</option>
                                    </select>
                                </div>
                            </div>

                            <div class="flex gap-4 pt-4">
                                <button type="submit" class="btn-3d bg-pink-500 text-white px-8 py-3 rounded-lg font-semibold hover:bg-pink-600 transition-colors duration-200">
                                    <i class="fas fa-save mr-2"></i> Save Profile
                                </button>
                                <a href="{{ url_for('dashboard') }}" class="btn-3d bg-gray-500 text-white px-8 py-3 rounded-lg font-semibold hover:bg-gray-600 transition-colors duration-200">
                                    <i class="fas fa-arrow-left mr-2"></i> Back to Dashboard
                                </a>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Profile Tips Sidebar -->
                <div class="md:col-span-1">
                    <div class="card-3d bg-white p-6 rounded-lg shadow-lg">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-lightbulb text-yellow-500 text-xl mr-3"></i>
                            <h3 class="text-xl font-bold text-gray-800">Profile Tips</h3>
                        </div>

                        <div class="space-y-4">
                            <div class="border-l-4 border-pink-500 pl-4">
                                <h4 class="font-semibold text-gray-800 mb-2">
                                    <i class="fas fa-user-check text-pink-500 mr-2"></i> Complete Your Profile
                                </h4>
                                <p class="text-sm text-gray-600">The more information you provide, the better our AI can recommend clothing that matches your style and preferences.</p>
                            </div>

                            <div class="border-l-4 border-blue-500 pl-4">
                                <h4 class="font-semibold text-gray-800 mb-2">
                                    <i class="fas fa-palette text-blue-500 mr-2"></i> Color Analysis
                                </h4>
                                <p class="text-sm text-gray-600">Select colors that you feel confident wearing. Our AI will use this to suggest complementary colors.</p>
                            </div>

                            <div class="border-l-4 border-green-500 pl-4">
                                <h4 class="font-semibold text-gray-800 mb-2">
                                    <i class="fas fa-ruler text-green-500 mr-2"></i> Body Type
                                </h4>
                                <p class="text-sm text-gray-600">Knowing your body type helps us recommend clothing that flatters your figure.</p>
                            </div>

                            <div class="border-l-4 border-purple-500 pl-4">
                                <h4 class="font-semibold text-gray-800 mb-2">
                                    <i class="fas fa-magic text-purple-500 mr-2"></i> Style Preferences
                                </h4>
                                <p class="text-sm text-gray-600">Your style preference helps us curate recommendations that match your lifestyle and aesthetic.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Handle color preferences
    const colorCheckboxes = document.querySelectorAll('input[type="checkbox"][value]');
    const colorPreferenceInput = document.getElementById('color_preference');
    
    // Load existing color preferences
    if (colorPreferenceInput.value) {
        const selectedColors = colorPreferenceInput.value.split(',');
        colorCheckboxes.forEach(checkbox => {
            if (selectedColors.includes(checkbox.value)) {
                checkbox.checked = true;
            }
        });
    }
    
    // Update color preferences when checkboxes change
    colorCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            const selectedColors = Array.from(colorCheckboxes)
                .filter(cb => cb.checked)
                .map(cb => cb.value);
            colorPreferenceInput.value = selectedColors.join(',');
        });
    });
});
</script>
{% endblock %}
